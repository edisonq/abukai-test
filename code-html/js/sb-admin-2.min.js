/*!
 * Start Bootstrap - SB Admin 2 v4.0.3 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function(o){"use strict";o("#sidebarToggle, #sidebarToggleTop").on("click",function(e){o("body").toggleClass("sidebar-toggled"),o(".sidebar").toggleClass("toggled"),o(".sidebar").hasClass("toggled")&&o(".sidebar .collapse").collapse("hide")}),o(window).resize(function(){o(window).width()<768&&o(".sidebar .collapse").collapse("hide")}),o("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){if(768<o(window).width()){var a=e.originalEvent,r=a.wheelDelta||-a.detail;this.scrollTop+=30*(r<0?1:-1),e.preventDefault()}}),o(document).on("scroll",function(){100<o(this).scrollTop()?o(".scroll-to-top").fadeIn():o(".scroll-to-top").fadeOut()}),o(document).on("click","a.scroll-to-top",function(e){var a=o(this);o("html, body").stop().animate({scrollTop:o(a.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()}),o(document).ready(function(){o("#reset-button").click(function(){o("#error-area-customer").html("")}),o("#save-form").on("click",function a(){var e=o(".form-customer").serialize();o("#save-form").off("click"),o("#save-form").html("saving"),o("#save-form").attr("disabled","disabled"),o("#reset-button").attr("disabled","disabled"),o("#firstname").attr("disabled","disabled"),o("#lastname").attr("disabled","disabled"),o("#email").attr("disabled","disabled"),o("#city").attr("disabled","disabled"),o("#country").attr("disabled","disabled"),o("#upload-picture").attr("disabled","disabled"),o.ajax({url:BASEURLL+"php/customer.php",type:"POST",data:e,dataType:"JSON",success:function(e){console.log("success"),0==e.errorStatus&&(window.location.href=BASEURLL+"?email="+o("#email").val())},error:function(e){console.log(e.responseJSON),o("#error-area-customer").html('<div class="alert alert-danger" role="alert">'+e.responseJSON.errorMessage+"</div>"),o("#save-form").removeAttr("disabled"),o("#save-form").on("click",a),o("#save-form").html("Save"),o("#reset-button").removeAttr("disabled"),o("#firstname").removeAttr("disabled"),o("#lastname").removeAttr("disabled"),o("#email").removeAttr("disabled"),o("#city").removeAttr("disabled"),o("#country").removeAttr("disabled"),o("#upload-picture").removeAttr("disabled")}})}),o("#upload-picture-now").on("click",function a(){var e=o("#testing-file").prop("files")[0],r=new FormData;r.append("file",e),o("#upload-picture-now").html("uploading, please wait"),o("#upload-picture-now").off("click"),o("#upload-cancel").attr("disabled","disabled"),o("#upload-picture-now").attr("disabled","disabled"),o.ajax({url:BASEURLL+"php/upload.php",dataType:"JSON",cache:!1,contentType:!1,processData:!1,data:r,type:"post",success:function(e){0===e.errorCode?(o("#profile-picture").html('<img src="uploaded-pictures/'+e.newFileName+'" alt="Customer Picture" class="profile-picture" />'),o("#uploaded-image").html('<input type="hidden" name="uploaded-image" id="uploaded-image" value="'+e.newFileName+'" />'),o("#uploadModal").modal("toggle")):1===e.errorCode||2===e.errorCode?o("#error-area-upload").html('<div class="alert alert-danger" role="alert">File too large</div>'):4===e.errorCode?o("#error-area-upload").html('<div class="alert alert-danger" role="alert">No file selected</div>'):111===e.errorCode||222===e.errorCode?o("#error-area-upload").html('<div class="alert alert-danger" role="alert">'+e.message+"</div>"):o("#error-area-upload").html('<div class="alert alert-danger" role="alert">'+e.message+" <br>Error: "+e.errorCode+"</div>"),o("#upload-picture-now").html("Upload"),o("#upload-picture-now").on("click",a),o("#upload-cancel").removeAttr("disabled"),o("#upload-picture-now").removeAttr("disabled")}})})})}($);